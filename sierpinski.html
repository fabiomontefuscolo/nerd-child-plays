<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="Content" content="text/html; charset=utf-8"/>
        <title>Triângulo de Sierpinski</title>
        <style>
            html, body {
                height: 100%;
                width: 100%;
                margin: 0;
                padding: 0;
            }
            #canvas {
                height: 100%;
                width: 100%;
            }
        </style>
        <script type="application/x-javascript">
            window.onload = function() {
                var canvas = document.getElementById('canvas');
                var d = canvas.getContext('2d');

                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;

                d.strokeStyle = '#f00';
                d.fillStyle = "#FF0000";
                d.lineWidth   = 1;

                var starttime = new Date().getTime();

                // determinar base e altura do triângulo
                var base = Math.min(canvas.width,canvas.height);
                var altura = Math.sqrt(3) * base / 2;

                // escolher 3 pontos para o triangulo
                var pts = Array();
                pts[0] = [(canvas.width - base) / 2, canvas.height];
                pts[1] = [pts[0][0] + base,          canvas.height];
                pts[2] = [pts[0][0] + (base/2),      canvas.height-altura];

                // criar um Ponto sobre qualquer um dos vértices
                var P = [pts[0][0], pts[0][1]];

                function run() {
                    for( var i=0; i < 10000; i++ ){
                        if( P[1] > (canvas.height-altura/2) ){
                            if(P[0] < canvas.width/2) {
                                d.fillStyle = "#FF0000";
                            } else {
                                d.fillStyle = "#00FF00";
                            }
                        } else {
                            d.fillStyle = "#0000FF";
                        }

                        // desenha o ponto P
                        d.fillRect(P[0],P[1],1,1);

                        // escolhe um vertice aleatoriamente
                        var vertex = pts[ Math.floor((Math.random() * 10) % 3) ];

                        // Move o Ponto P para a Metade do caminho com o
                        // vertice escolhido aleatoriamente
                        P[0] = (P[0] + vertex[0])/2;
                        P[1] = (P[1] + vertex[1])/2;
                    }
                }
                setInterval(run, 100);
            }
        </script>
    </head>
    <body>
        <canvas id="canvas"></canvas>
    </body>
</html>
